# 项目路径结构功能说明表格

| 路径 | 主要功能 | 包含内容 | 关键文件/组件 |
|------|----------|----------|---------------|
| **`src/`** | 核心源代码 | 训练、模型、数据处理、评估、可视化 | 项目核心逻辑实现 |
| **`src/training/`** | 训练系统 | 离线训练、在线学习、恢复管理 | train_offline_universal.py, online系统 |
| **`src/training/offline/`** | 离线训练 | 通用训练脚本、知识蒸馏集成 | 支持多模型、video-aware分割 |
| **`src/training/online/`** | 在线学习 | 实时适应、视频处理 | 自适应学习、帧选择算法 |
| **`src/models/`** | 模型架构 | 基线模型、在线模型、模型工厂 | model_zoo.py统一管理 |
| **`src/dataio/`** | 数据处理 | 数据集类、预处理流程 | seg_dataset_min.py核心数据集 |
| **`src/eval/`** | 评估系统 | 指标计算、性能评估 | 多指标支持(IoU/Dice/Acc) |
| **`src/viz/`** | 可视化工具 | 训练监控、结果展示 | 实时可视化、着色工具 |
| **`src/common/`** | 通用组件 | 常量定义、监控、管理工具 | 项目基础设施组件 |
| **`configs/`** | 配置管理 | YAML配置文件、实验参数 | 统一参数管理系统 |
| **`configs/experiments/`** | 实验配置 | KD实验、基线对比配置 | 科研实验专用配置 |
| **`scripts/`** | 工具脚本 | 数据验证、实验运行、分析工具 | 独立功能脚本集合 |
| **`utils/`** | 工具模块 | 知识蒸馏、视频处理、损失函数 | 可复用工具组件 |
| **`data/`** | 数据存储 | 数据集文件、缓存路径 | Seg8K/CholecT80数据集 |
| **`outputs/`** | 训练输出 | 模型检查点、日志、可视化结果 | 实验结果存储 |
| **`checkpoints/`** | 模型权重存储 | 预训练模型、最佳模型保存（训练时创建） | 模型检查点管理 |
| **`logs/`** | 日志文件存储 | 训练日志、错误记录（训练时创建） | 系统运行记录 |
| **`splits/`** | 数据分割 | Video-aware分割结果 | 训练/验证数据划分 |

## 核心功能模块详解

### 🏋️ 训练系统 (`src/training/`)
- **离线训练**: 完整的深度学习训练流程，支持知识蒸馏
- **在线学习**: 实时模型适应，帧选择和经验回放
- **恢复管理**: 训练中断恢复，检查点完整性验证

### 🦁 模型系统 (`src/models/`)  
- **模型工厂**: 统一的模型构建和管理接口
- **架构支持**: UNet、UNet++、Adaptive UNet等多种架构
- **分层设计**: 基线/离线/在线模型分类管理

### 📊 数据系统 (`src/dataio/`)
- **数据集类**: 核心分割数据集，支持多种映射方案
- **预处理**: FOV遮罩、数据增强、健康检查
- **格式支持**: Watershed区域重映射、多分类适配

### 📏 评估系统 (`src/eval/`)
- **多指标**: IoU、Dice、Accuracy、Precision、Recall
- **混合策略**: Loss和mIoU双重判定机制
- **自适应**: 自动检测任务类型并调整评估方式

### 🎨 可视化系统 (`src/viz/`)
- **实时监控**: 训练过程GPU/CPU/Loss实时显示
- **结果展示**: 分割结果着色、对比图生成
- **蒸馏可视化**: 知识蒸馏专用可视化工具

### ⚙️ 配置系统 (`configs/`)
- **分层管理**: 离线/在线/实验配置分类
- **参数统一**: YAML格式统一管理所有参数
- **实验支持**: 专门的实验配置便于科研对比

### 🔧 工具脚本 (`scripts/`)
- **数据验证**: WS值扫描、映射检查、调色板验证
- **实验自动化**: KD实验运行器、指标可视化
- **分析工具**: 参数统计、机制验证、结果对比

### 🛠️ 工具模块 (`utils/`)
- **知识蒸馏**: 完整的Teacher-Student蒸馏框架
- **视频处理**: 帧提取、视频合成工具
- **损失函数**: 复合损失函数库

## 数据流向图

```
数据集 → src/dataio → src/training → src/models → src/eval → outputs/
  ↓           ↓            ↓           ↓           ↓          ↓
data/    预处理增强    训练监控     模型推理    指标计算   结果保存
  ↓           ↓            ↓           ↓           ↓          ↓
配置文件   健康检查    可视化展示   架构管理    混合评估   检查点管理
```

## 项目特色亮点

### 🎯 **统一接口设计**
- 所有模型通过model_zoo统一管理
- 配置文件实现参数标准化
- 评估系统自动适配任务类型

### 🔄 **完整生命周期**
- 从数据预处理到模型部署的完整流程
- 训练、验证、测试、可视化一体化
- 实验管理和结果追踪系统

### 🛡️ **质量保证体系**
- 数据健康检查防止训练问题
- 多重验证确保实验可靠性
- 完善的错误处理和恢复机制

### ⚡ **高效开发体验**
- 实时训练监控和进度显示
- 丰富的可视化和分析工具
- 模块化设计便于扩展和维护